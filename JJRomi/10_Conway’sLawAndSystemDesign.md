# CHAPTER 10. Conway’s Law and System Design
> 조직은 시스템(반드시 정보 시스템이라기보다는 더 넓은 의미의 시스템)을 설계할 때 필연적으로 그 조직의 의사소통 구조와 일치하도록 만든다.

## 증거
느슨히 결합된 조직과 강력히 결합된 조직
강력히 결합된 조직은 일반적으로 비전과 목적이 결속된 상용제품 회사로 간주 될 수 있다.
느슨히 결합된 조직은 분산된 오픈 소스 커뮤니티로 대표할 수 있다.
두 조직을 비교한 연구에서 실제로 더 느슨히 결합된 조직일수록 모듈화가 더 잘되어 있으며 결합도가 낮은 시스템을 만들어 낸다.
윈도우 비스타
마이크로소프트는 조직 구조가 어떻게 그들의 특정 제품, 즉 윈도우 비스타의 소프트웨어 품질에 영향을 주는지 알아보기 위해 경험적 사례 연구를 진행했다(http://bit.ly/1Bfbdwb) . 연구원들은 다수 시스템 내의 컴포넌트들의 오류 유발 수준을 결정할 많은 요소를 관찰했다. 코드 복잡도처럼 흔히 사용되는 소프트웨어 품질 지표를 포함하여 다수의 지표를 살펴본 후 그들은 조직 구조와 연관된 지표가 통계적으로 가장 밀접한 척도임을 발견했다.

## 넷플릭스와 아마존
아마존은 각 시스템의 전체 수명주기를 그 시스템을 관리하는팀이 소유하고 운영할 때 이점을 일찍부터 이해하고 있었다. 그리고 작은 팀이 일도 더 빠르게 처리한다는 사실도 잘 알고 있었다. 이는 팀의 규모가 피자 두판으로 식사를 마칠 수 없는 규모가 돼서는 안된다는 유명한 피자 두 판 크기의 팀 법칙을 만들어냈다.
넷플릭스는 아마존의 사례를 교훈삼아 처음부터 작고 독립적인 팀을 조직했고 그 결과 독립적인 서비스를 만들 수 있었다. 변경 속도에 최적화된 시스템 아키텍처를 확보할 수 있었다.

## 이것으로 무엇을 할 수 있을까?
의사소통 경로 적응
세분화된 의사소통 능력을 갖춘 단일 팀은 서비스 내부의 코드 통신 경로와 잘 부합된다. 또한 제안된 변경과 리펙토링에 대한 의사소통이 쉽다는 것을 알고 일반적으로 주인의식도 투철하다.
지리적으로 분산된 팀의 의사소통 비용이 높을수록 변경을 조율하는 비용 또한 높아진다.
변경을 조율하는 비용이 증가하면 ‘조율 및 의사소통 비용을 낮출 방법을 찾거나 아니면 아예 변경하지 않는’ 두 가지 현상 중 하나가 발생한다. 후자가 바로 결국 거대하고 유지보수하기 어려운 코드베이스가 되는 방식이다.


## 서비스 소유권
일반적으로 서비스를 소유한 팀이 해당 서비스의 변경을 책임지는 것을 말한다. 그 팀은 서비스의 변경이 소비자 서비스를 망가뜨리지 않는 한 필요하다면 부담 없이 코드를 재구성해도 된다.
소유권 확대는 자율성 향상과 빠른 출시로 이어졌다. 애플리케이션의 배포와 유지보수까지 한 팀이 책임지게 하면 그 보상으로 배포하기 쉬운 서비스가 만들어진다.

## 공유 서비스의 추진
분리의 어려움
둘 이상의 팀이 하나의 서비스를 소유하는 이유는 서비스 분리 비용이 아주 높거나 조직이 그것의 문제를 알지 못했기 때문이다. 이는 거대한 모놀로식 시스템에서 흔하게 발생한다.
제품 특징 팀
작은 팀이 하나의 제품 특증의 모든 기능을 구현하면서 (컴포넌트 또는 서비스 경계를 넘는 것이더라도) 그 제품 특징 셋의 개발을 주도하는 것이다. 이 구조는 팀이 최종 결과에 집중하게 하고 다수의 다른 팀 간의 변경을 조율하는 어려움을 피하면서 공동 작업이 되도록 한다.
전달 병목점
공유된 서비스를 포함하지 않으면서 이러한 상황을 피하는 방안
단지 기다리는 것이다. 제품 특징의 중요성과 얼마나 오래 지연될 것인지에 따라 이 방식은 잘 통하거나 중요한 문제가 될 수 있다. 
해당 서비스를 분리하고 팀에 소유권을 맡기는 것이다.

## 내부 오픈 소스 
일반적인 오픈 소스에 사용하는 패턴을 내부에도 똑같이 적용하는 것이다.
처음부터 서비스를 개발한 사람에게 커밋권한이 있다면 직접 그들을 찾아서 도움을 요청할 수 있다.
관리인의 역할
신뢰할 수 있는 커미터 (코어 팀) 와 신뢰할 수 없는 커미터 (팀 밖에서 변경을 반영하는 사람)를 구분해야한다.
코어팀에게는 변경 사항을 조사하고 승인하는 방법이 필요하다. 변경 코드는 기존 코드와 문법적으로 일관돼야한다. 즉, 변경이 코드베이스의 코딩 가이드라인을 준수하는 것을 보장해야한다.
좋은 게이트키퍼는 제출자와 명확한 의사소통을 하고 좋은 행동 양식을 장려하면서 많은 일을 한다. 나쁜 게이트키퍼는 그 역할을 구실로 다른 이에게 권한을 행사하거나 임의의 기술직 결정에 대한 종교적인 전쟁을 일으킨다. 
신뢰할 수 없는 커미터가 코드베이스에 변경사항을 제출할 수 있도록 하려면 게이트키퍼가 되는 오버헤드가 과연 그만한 가치가 있는지 고민해야 한다.
성숙도
대부분의 오픈 소스 프로젝트는 핵심 코드의 첫 번째 버전이 완료될때까지 신뢰되지 않는 큰 커미터 그룹의 코드 반영은 허용하지 않는 경향이 있다. 조직도 유사한 모델을 택하는 것이 좋다. 
서비스가 제법 성숙하여 변경이 거의 없어지는 시점에 다른 이들의 기여를 받기 시작하면 된다.
도구
분산 버전 관리 도구는 필수다. 조직이 크면 요청된 패치에 관해 토의하고 발전시킬 수 있는 도구도 필요하다. 

## 경계가 있는 콘텍스트와 팀 구조
경계가 있는 콘텍스트에 따라 팀을 정렬하고 싶어 한다. 
장점 
팀은 밀접한 연관되어 있어 경계가 있는 콘텍스트 내에서 도메인 개념을 더 쉽게 파악할 수 있다.
경계가 있는 콘텍스트 내의 서비스들은 서로 더 긴밀히 소통하여 시스템 설계와 릴리스 조율에 더 쉽게 해준다.
인도 팀 (delivery team)이 비즈니스 이해당사자와 교류하는 방식면에서 팀이 그 분야의 전문가들과 좋은 관계를 형성하기 더 쉽다.

## 방치된 서비스
다양한 기술 스택을 사용하는 폴리글랏 방식을 적용한 경우 팀이 더 이상 그 기술 스택을 모른다면 방치된 서비스를 변경하는 것은 심각한 문제가 될 수 있다.

## 사례 연구 : RealEstate.com.au

## 콘웨이의 역법칙
시스템 설계가 조직을 변경할 수 있다. 

## 사람
> 처음에 어떻게 보이든 항상 사람의 문제다 . - 게리 와인버그<컨설팅의 두 번째 법칙>

- 사람도 반드시 고려해야한다. 현재를 만들었고 미래를 만드는 주체가 바로 사람이기 때문이다. 현 직원의 비전에 대한 생각을 고려하지 않거나 그들이 지닌 능력에 대한 고려 없이 일을 어떻게 완료하는지에 관한 비전만 생각하면 대개 나쁜 곳으로 빠지기 쉽다.





